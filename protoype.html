<!DOCTYPE html>
<html class="dark" lang="en">
<head>
    <meta charset="utf-8" />
    <meta content="width=device-width, initial-scale=1.0" name="viewport" />
    <title>CoreTerra Kanban Dashboard</title>
    
    <!-- External Libraries -->
    <script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
    <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:wght,FILL@100..700,0..1&display=swap" rel="stylesheet" />
    <link href="https://fonts.googleapis.com" rel="preconnect" />
    <link crossorigin="" href="https://fonts.gstatic.com" rel="preconnect" />
    <link href="https://fonts.googleapis.com/css2?family=VT323&family=Press+Start+2P&display=swap" rel="stylesheet" />

    <style>
        .font-pixel-display { font-family: 'Press Start 2P', monospace; }
        .font-pixel-body { font-family: 'VT323', monospace; }
        .material-symbols-outlined { font-variation-settings: 'FILL' 0, 'wght' 400, 'GRAD' 0, 'opsz' 24; }
        body { overflow: hidden; } /* Prevent double scrollbars */

        /* Pixel Art Scrollbar */
        ::-webkit-scrollbar { width: 12px; height: 12px; }
        ::-webkit-scrollbar-track { background: #111; border-left: 2px solid #333; }
        ::-webkit-scrollbar-thumb { background: #444; border: 2px solid #111; box-shadow: inset -2px -2px 0px #222, inset 2px 2px 0px #666; }
        ::-webkit-scrollbar-thumb:hover { background: #555; }

        /* Custom Pixel Borders */
        .pixel-border {
            box-shadow:
                -2px 0 0 0 #2a2a2a,
                2px 0 0 0 #2a2a2a,
                0 -2px 0 0 #2a2a2a,
                0 2px 0 0 #2a2a2a;
            margin: 2px;
        }
    </style>
    <script id="tailwind-config">
      tailwind.config = {
        darkMode: "class",
        theme: {
          extend: {
            colors: {
              "primary": "#137fec",
              "background-light": "#f6f7f8",
              "background-dark": "#111111",
              "retro-black": "#0c0c0c",
              "retro-gray": "#1f1f1f",
            },
            fontFamily: {
              "display": ["'Press Start 2P'", "monospace"],
              "mono": ["'VT323'", "monospace"]
            },
            borderRadius: {"DEFAULT": "0px", "lg": "0px", "xl": "0px", "full": "0px"},
          },
        },
      }
    </script>

    <!-- React Libraries -->
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/history@5/umd/history.development.js"></script>
    <script src="https://unpkg.com/react-router@6.3.0/umd/react-router.development.js"></script>
    <script src="https://unpkg.com/react-router-dom@6.3.0/umd/react-router-dom.development.js"></script>
    <script src="https://unpkg.com/babel-standalone@6/babel.min.js"></script>
</head>
<body class="bg-background-light dark:bg-background-dark text-[#EAEAEA] font-mono antialiased text-lg">
    <div id="root"></div>

    <script type="text/babel">
        // Global Destructuring
        const { useState, useEffect } = React;
        const { createRoot } = ReactDOM;
        const { MemoryRouter, Routes, Route, Link, useNavigate } = ReactRouterDOM;
        
        // --- DATA ---
        const initialTasks = {
          inbox: [
            { id: 'CT-128', status: 'inbox', title: 'Design New User Onboarding Flow', priority: 'p2', priorityColor: 'bg-[#4A3E2D] text-[#FFC107]', assignee: { initial: 'UI', color: 'bg-gray-500', name: 'UI Designer' }, role: 'UI', body: 'Design the new onboarding flow for mobile users.\n\n- [ ] Sketch wireframes\n- [ ] Review with product\n- [ ] Finalize high-fidelity mocks' },
            { id: 'CT-131', status: 'inbox', title: 'Fix Database Connection Leak', priority: 'p1', priorityColor: 'bg-[#542B2B] text-[#FF8A80]', assignee: { initial: 'C', color: 'bg-red-800', name: 'Charles' }, role: 'Backend', body: 'Investigate connection pool exhaustion in the worker service.' },
          ],
          next: [
            { id: 'CT-124', status: 'next', title: 'Refactor Authentication Service', priority: 'p1', priorityColor: 'bg-[#542B2B] text-[#FF8A80]', assignee: { initial: 'D', color: 'bg-green-800', name: 'David' }, role: 'Backend', body: 'Migrate legacy auth tokens to JWT.' },
            { id: 'CT-130', status: 'next', title: 'Implement Search API Endpoint', priority: 'p3', priorityColor: 'bg-[#3B2E49] text-[#E0B0FF]', assignee: { initial: 'D', color: 'bg-green-800', name: 'David' }, role: 'Backend', body: 'Create /api/v1/search endpoint with filtering capabilities.' },
          ],
          waiting: [
             { id: 'CT-132', status: 'waiting', title: 'Waiting for Design Review', priority: 'p2', priorityColor: 'bg-[#4A3E2D] text-[#FFC107]', assignee: { initial: 'UI', color: 'bg-gray-500', name: 'UI Designer' }, role: 'UI', body: 'Pending approval from the design lead.' },
          ],
          done: [
            { id: 'CT-119', status: 'done', title: 'Update Deployment Scripts', priority: 'p2', priorityColor: 'bg-[#4A3E2D] text-[#FFC107]', assignee: { initial: 'B', color: 'bg-blue-800', name: 'Brenda' }, role: 'DevOps', body: 'Updated k8s manifests for the new cluster.' },
            { id: 'CT-115', status: 'done', title: 'Onboard New Frontend Developer', priority: 'p3', priorityColor: 'bg-[#3B2E49] text-[#E0B0FF]', assignee: { initial: 'B', color: 'bg-blue-800', name: 'Brenda' }, role: 'Management', body: 'Setup laptop and accounts for the new hire.' },
          ]
        };

        const initialLogs = [
            "[10:45:12] Task #CT-124 moved to 'Next' by @david",
            "[10:44:50] New commit pushed to 'main' by @alex",
            "[10:42:10] System: PQI for 'Frontend' dropped to 72.",
            "[10:35:01] Task #CT-127 assigned to @brenda",
            "[10:33:45] User @charles changed status to 'Blocked'"
        ];

        // --- COMPONENTS ---

        const NavLink = ({ icon, text, active = false, to = "#" }) => (
            <Link to={to} className={`flex items-center gap-3 px-3 py-2 cursor-pointer border-2 border-transparent hover:border-[#333] hover:bg-[#222] ${active ? 'bg-[#222] border-[#444] text-white' : 'text-[#9dabb9]'}`}>
                <span className="material-symbols-outlined text-base">{icon}</span>
                <p className="font-medium text-lg pt-1">{text}</p>
            </Link>
        );

        const NavGroup = ({ icon, color, title, children, defaultExpanded = true }) => {
            const [expanded, setExpanded] = useState(defaultExpanded);

            return (
                <div className="flex flex-col gap-1">
                    <div className="flex items-center gap-2 py-1 cursor-pointer hover:bg-[#222] p-1 border-2 border-transparent hover:border-[#333]" onClick={() => setExpanded(!expanded)}>
                        <span className="material-symbols-outlined text-base text-[#9dabb9]">{expanded ? 'expand_more' : 'chevron_right'}</span>
                        <div className={`w-3 h-3 border-2 border-[#111] ${color}`}></div>
                        <p className="text-white text-lg pt-1">{title}</p>
                    </div>
                    {expanded && <div className="pl-6 flex flex-col gap-1 border-l-2 border-[#2a2a2a] ml-2">{children}</div>}
                </div>
            );
        };
        
        const NavSubItem = ({ color, text }) => (
            <div className="flex items-center gap-2 py-1 hover:bg-[#222] p-1">
                <div className={`w-2 h-2 ${color}`}></div>
                <p className="text-[#9dabb9] text-lg">{text}</p>
            </div>
        );
        
        const Sidebar = () => (
            <aside className="w-[300px] min-w-[240px] max-w-[400px] flex-shrink-0 bg-[#0c0c0c] border-r-4 border-[#2a2a2a] p-4 flex flex-col resize-x overflow-auto">
                <div className="flex items-center gap-4 mb-8 px-1 border-b-4 border-[#2a2a2a] pb-4">
                    <div className="bg-center bg-no-repeat aspect-square bg-cover size-12 border-2 border-[#fff]" style={{ backgroundImage: 'url("https://lh3.googleusercontent.com/aida-public/AB6AXuDSOR72eK1H5cCfSa1I3VSaTQGtjYThNG9XIAbrPmHmFGdwj00ApRaoTp5Thj60nEoKEszuJwFg5I_T1xNWHmuBA5dTPbJxhBlQeksRAA8fXppcaZQEAnayvUoputQ0j8H5kRMKpnLtwG51hcZPEMZq-ijB2VVeRl3yxDmQU4x5oMoL-rpqbRiGe1AKLw7NH3sSbrD-RLgacDfcn4Hh-LaOER-CuWCCK0Klz7i97I48cXYBCuj3HDs_xqM-R-8IdlhlKq0gt9QIMEYB")' }}></div>
                    <div className="flex flex-col">
                        <h1 className="text-white text-xs font-display leading-normal mb-1">CoreTerra</h1>
                        <p className="text-[#9dabb9] text-sm font-normal leading-normal">Lvl 5 (250/500 XP)</p>
                        <div className="flex items-center gap-1">
                            <span className="text-blue-400 text-xs">ðŸ’Ž</span>
                            <span className="text-blue-400 text-xs font-bold">120</span>
                        </div>
                    </div>
                </div>
                <div className="flex flex-col gap-2 text-sm">
                    <NavLink icon="dashboard" text="Kanban" active={true} to="/" />
                    <NavLink icon="folder_managed" text="Role Index" />

                    <div className="flex flex-col gap-1 pl-2 mt-4">
                        <NavGroup icon="expand_more" color="bg-[#2ECC71]" title="Project Lead" defaultExpanded={true}>
                            <NavSubItem color="bg-[#2ECC71]" text="Brenda" />
                        </NavGroup>
                        <NavGroup icon="expand_more" color="bg-[#E74C3C]" title="Backend Dev" defaultExpanded={true}>
                           <NavSubItem color="bg-[#E74C3C]" text="Charles" />
                           <NavSubItem color="bg-[#2ECC71]" text="David" />
                        </NavGroup>
                        <NavGroup icon="chevron_right" color="bg-[#2ECC71]" title="UI Designer" defaultExpanded={false} />
                        <NavGroup icon="chevron_right" color="bg-[#2ECC71]" title="Frontend Dev" defaultExpanded={false} />
                    </div>
                </div>
                <div className="mt-auto flex flex-col gap-1">
                    <NavLink icon="settings" text="Settings" />
                    <NavLink icon="help" text="Help" />
                </div>
            </aside>
        );

        const TaskCard = ({ task, isDone, onClick }) => (
            <div onClick={() => onClick(task)} className={`bg-[#1C1C1C] border-2 border-[#444] p-3 cursor-pointer ${isDone ? 'opacity-60' : ''} hover:border-primary hover:bg-[#222] transition-colors duration-75 shadow-[4px_4px_0px_0px_rgba(0,0,0,0.5)] active:translate-y-1 active:shadow-none group`}>
                <div className="flex justify-between items-start">
                    <p className={`text-lg text-white/90 mb-3 pr-2 leading-tight ${isDone ? 'line-through decoration-2' : ''}`}>{task.title}</p>
                    <span className="material-symbols-outlined text-[#333] group-hover:text-[#9dabb9] text-base transition-colors">edit_document</span>
                </div>
                <div className="flex items-center justify-between text-xs">
                    <div className="flex items-center gap-2">
                        <span className="text-[#9dabb9] text-base">{task.id}</span>
                        <span className={`px-2 py-1 ${task.priorityColor} border border-white/10 uppercase tracking-widest text-[10px]`}>{task.priority}</span>
                    </div>
                    <div className={`w-6 h-6 ${task.assignee.color} text-white flex items-center justify-center text-[10px] font-bold border-2 border-[#000] shadow-[1px_1px_0px_0px_rgba(255,255,255,0.2)]`} title={task.assignee.name}>
                        {task.assignee.initial}
                    </div>
                </div>
            </div>
        );

        const KanbanColumn = ({ title, count, tasks, isDone = false, onTaskClick }) => (
            <div className="w-[340px] flex-shrink-0 flex flex-col bg-[#111] border-2 border-[#333] p-2">
                <div className="flex items-center justify-between pb-4 border-b-2 border-[#333] mb-4 p-2 bg-[#1a1a1a]">
                    <div className="flex items-center gap-3">
                        <h2 className="text-xs font-display text-white uppercase tracking-wider">{title}</h2>
                        <span className="text-base text-[#111] bg-[#9dabb9] px-2 py-0.5">{count}</span>
                    </div>
                    <span className="material-symbols-outlined text-[#9dabb9] cursor-pointer">more_horiz</span>
                </div>
                <div className="flex flex-col gap-4 overflow-y-auto pr-2 flex-1 p-1">
                    {tasks.map(task => <TaskCard key={task.id} task={task} isDone={isDone} onClick={onTaskClick} />)}
                </div>
            </div>
        );

        const KanbanBoard = ({ tasks, onTaskClick, onCommand, onFilterChange, filterText }) => {
            const [command, setCommand] = useState('');

            const handleKeyDown = (e) => {
                if (e.key === 'Enter' && command.trim()) {
                    onCommand(command);
                    setCommand('');
                }
            };

            // Filter tasks locally for display
            const filterTasks = (list) => {
                if (!filterText) return list;
                const lower = filterText.toLowerCase();
                return list.filter(t =>
                    t.title.toLowerCase().includes(lower) ||
                    t.id.toLowerCase().includes(lower)
                );
            };

            return (
                <div className="flex-1 flex flex-col min-w-0 overflow-x-auto bg-[#161616]">
                    <div className="px-6 py-4 border-b-4 border-[#2a2a2a] bg-[#1a1a1a]">
                        <div className="relative">
                            <span className="material-symbols-outlined absolute left-3 top-1/2 -translate-y-1/2 text-[#9dabb9] text-xl">search</span>
                            <input
                                className="w-full bg-[#000] border-2 border-[#333] h-12 pl-12 pr-4 text-white/90 placeholder:text-[#555] focus:outline-0 focus:border-primary text-lg font-mono"
                                placeholder="Filter tasks (e.g. 'design' or 'CT-128')..."
                                type="text"
                                value={filterText}
                                onChange={(e) => onFilterChange(e.target.value)}
                            />
                        </div>
                    </div>
                    <div className="flex-1 p-6 flex gap-6 overflow-x-auto">
                        <KanbanColumn title="Inbox" count={filterTasks(tasks.inbox).length} tasks={filterTasks(tasks.inbox)} onTaskClick={onTaskClick} />
                        <KanbanColumn title="Next" count={filterTasks(tasks.next).length} tasks={filterTasks(tasks.next)} onTaskClick={onTaskClick} />
                        <KanbanColumn title="Waiting For" count={filterTasks(tasks.waiting).length} tasks={filterTasks(tasks.waiting)} onTaskClick={onTaskClick} />
                        <KanbanColumn title="Done" count={filterTasks(tasks.done).length} tasks={filterTasks(tasks.done)} isDone={true} onTaskClick={onTaskClick} />
                    </div>
                    <div className="flex items-center px-4 py-3 gap-3 border-t-4 border-[#2a2a2a] bg-[#0c0c0c]">
                        <div className="bg-center bg-no-repeat aspect-square bg-cover size-10 border-2 border-[#fff]" style={{ backgroundImage: 'url("https://lh3.googleusercontent.com/aida-public/AB6AXuAu627pw9HLspmbpQrYJ5l7a3ZEasDUlVCJ5oLx0oRMORN4e2T2I3kocxkfnLxMcwAaY6QpdP2dsq-zFGlBQdatzQ8_vKfcGI-PKP5DGr7d4Z6DcuWbpOpaTNQQbeXwITGVYbRVteqGplaDwU65GJPKwzKuYJVg8TUqb1u1IqH7CxJKQgws_kYb6lrFrHg1f6ohCOV_RjUUZQbz-qGQLq7VHF1zYneOYs2dHWRkTpE7fQnCxBCHRTBcP9nmozeh5FvVy-kUEmKiw_eA")' }}></div>
                        <label className="flex flex-col min-w-40 h-12 flex-1">
                            <div className="flex w-full flex-1 items-stretch h-full">
                                <input
                                    className="form-input flex w-full min-w-0 flex-1 resize-none overflow-hidden text-[#00ff00] focus:outline-0 border-2 border-[#333] focus:border-primary bg-[#000] h-full placeholder:text-[#005500] px-4 text-lg font-mono"
                                    placeholder="> Type task title and press Enter..."
                                    value={command}
                                    onChange={(e) => setCommand(e.target.value)}
                                    onKeyDown={handleKeyDown}
                                />
                            </div>
                        </label>
                    </div>
                </div>
            );
        }

        const InfoPanel = ({ logs }) => (
            <aside className="w-[360px] min-w-[300px] max-w-[500px] flex-shrink-0 flex flex-col resize-x overflow-auto bg-[#0c0c0c] border-l-4 border-[#2a2a2a]">
                <div className="flex-1 p-6 text-sm leading-relaxed overflow-y-auto font-mono">
                    <h2 className="text-xs font-display text-primary mb-4 border-b-2 border-primary pb-2 inline-block">TEAM STATUS</h2>
                    <p className="text-white/80 whitespace-pre-wrap pb-3 pt-1">{`Alex: Online
Brenda: In-Focus (API Design)
Charles: Blocked (Waiting for review)`}
                    </p>
                    <h2 className="text-xs font-display text-primary mb-4 mt-8 border-b-2 border-primary pb-2 inline-block">LOG STREAM</h2>
                    <p className="text-[#00ff00] whitespace-pre-wrap">
                        {logs.join('\n')}
                    </p>
                </div>
                <div className="flex-1 p-6 border-t-4 border-[#2a2a2a] text-sm leading-relaxed overflow-y-auto bg-[#000]">
                    <h2 className="text-xs font-display text-primary mb-4 border-b-2 border-primary pb-2 inline-block">COMMAND OUTPUT</h2>
                    <p className="text-[#00ff00] whitespace-pre-wrap">{`$ pqi get --role='Frontend'
> Project Quality Index for 'Frontend' is 72 (Red).
$ get tasks --assignee='@david'
> 1. #CT-124 Refactor Authentication Service
> 2. #CT-131 Fix Database Connection Leak`}
                    </p>
                </div>
            </aside>
        );

        const TaskDetail = ({ task, onClose, onUpdate }) => {
            const [localTask, setLocalTask] = useState(task);

            useEffect(() => { setLocalTask(task); }, [task]);

            const handleChange = (field, value) => {
                const updated = { ...localTask, [field]: value };
                setLocalTask(updated);

                // If the field is one that affects visuals (like priorityColor), we should simulate that update too if we had logic for it.
                // For status change, we handle it in parent.
                // For priority color, it's hardcoded in the example data, so we might need a mapping function in a real app.
                // Here we just pass the raw value change.

                onUpdate(updated, `UPDATE: ${task.id} - Changed ${field} to '${value}'`);
            };

            return (
                <aside className="w-[400px] flex-shrink-0 flex flex-col bg-[#0c0c0c] border-l-4 border-[#2a2a2a] h-full">
                    <div className="flex items-center justify-between p-4 border-b-4 border-[#2a2a2a] bg-[#1a1a1a]">
                         <div className="flex items-center gap-2">
                             <span className="material-symbols-outlined text-[#9dabb9]">description</span>
                             <span className="font-mono text-[#fff]">{task.id}.md</span>
                         </div>
                         <button onClick={onClose} className="text-[#9dabb9] hover:text-white material-symbols-outlined">close</button>
                    </div>
                    <div className="flex-1 overflow-y-auto p-0 font-mono text-sm bg-[#111]">
                        {/* Frontmatter Simulation */}
                        <div className="bg-[#0f0f0f] border-b-4 border-[#2a2a2a] p-4 text-[#888]">
                            <div className="flex gap-2 mb-2">
                                <span className="text-primary">---</span>
                            </div>
                            <div className="grid grid-cols-[80px_1fr] gap-y-3 items-center">
                                <label className="text-[#c792ea]">title:</label>
                                <input className="bg-transparent border-b border-[#333] focus:border-primary text-[#ecc48d] p-0 focus:ring-0 w-full" value={localTask.title} onChange={e => handleChange('title', e.target.value)} />

                                <label className="text-[#c792ea]">status:</label>
                                <select className="bg-[#111] border border-[#333] text-[#ecc48d] py-0 focus:ring-0 w-full h-7" value={localTask.status} onChange={e => handleChange('status', e.target.value)}>
                                    <option value="inbox">inbox</option>
                                    <option value="next">next</option>
                                    <option value="waiting">waiting</option>
                                    <option value="done">done</option>
                                </select>

                                <label className="text-[#c792ea]">priority:</label>
                                <select className="bg-[#111] border border-[#333] text-[#ecc48d] py-0 focus:ring-0 w-full h-7" value={localTask.priority} onChange={e => handleChange('priority', e.target.value)}>
                                    <option value="p1">p1</option>
                                    <option value="p2">p2</option>
                                    <option value="p3">p3</option>
                                </select>

                                <label className="text-[#c792ea]">role:</label>
                                <span className="text-[#c3e88d]">{localTask.assignee && localTask.assignee.name ? localTask.assignee.name : 'Unassigned'}</span>
                            </div>
                            <div className="flex gap-2 mt-2">
                                <span className="text-primary">---</span>
                            </div>
                        </div>

                        {/* Body */}
                        <div className="p-4 h-full bg-[#0c0c0c] flex flex-col">
                            <textarea
                                className="w-full flex-1 bg-transparent border-none text-[#eaeaea] p-0 focus:ring-0 resize-none font-mono leading-relaxed"
                                value={localTask.body || ''}
                                onChange={e => handleChange('body', e.target.value)}
                                placeholder="Write description here..."
                            />
                        </div>
                    </div>
                </aside>
            );
        };

        // --- SCREEN ---
        const DashboardPage = () => {
            const [tasks, setTasks] = useState(initialTasks);
            const [logs, setLogs] = useState(initialLogs);
            const [selectedTask, setSelectedTask] = useState(null);
            const [filterText, setFilterText] = useState('');

            const handleTaskUpdate = (updatedTask, logMessage) => {
                // Update Logs
                const timestamp = new Date().toLocaleTimeString('en-US', { hour12: false });
                setLogs(prev => [`[${timestamp}] ${logMessage}`, ...prev]);

                // Update Tasks State
                setTasks(prev => {
                    const newTasks = { ...prev };

                    // 1. Remove from old location
                    let found = false;
                    for (const status of Object.keys(newTasks)) {
                        const idx = newTasks[status].findIndex(t => t.id === updatedTask.id);
                        if (idx !== -1) {
                            newTasks[status] = [...newTasks[status]]; // copy array
                            newTasks[status].splice(idx, 1); // remove
                            found = true;
                            break;
                        }
                    }

                    // 2. Add to new location (based on updatedTask.status)
                    const targetStatus = updatedTask.status || 'inbox';
                    if (!newTasks[targetStatus]) newTasks[targetStatus] = []; // safety check

                    // We simply push to the end for now, or we could try to keep position
                    newTasks[targetStatus] = [updatedTask, ...newTasks[targetStatus]];

                    return newTasks;
                });

                // Keep selection in sync
                setSelectedTask(updatedTask);
            };

            const handleCommand = (cmdText) => {
                // Generate a random ID
                const id = 'CT-' + Math.floor(100 + Math.random() * 900);
                const title = cmdText; // Treat whole text as title for simplicity

                const newTask = {
                    id,
                    status: 'inbox',
                    title,
                    priority: 'p3',
                    priorityColor: 'bg-[#3B2E49] text-[#E0B0FF]',
                    assignee: { initial: '?', color: 'bg-gray-700', name: 'Unassigned' },
                    role: 'Unassigned',
                    body: ''
                };

                // Add to Inbox
                setTasks(prev => ({
                    ...prev,
                    inbox: [newTask, ...prev.inbox]
                }));

                const timestamp = new Date().toLocaleTimeString('en-US', { hour12: false });
                setLogs(prev => [`[${timestamp}] Created Task #${id}: '${title}'`, ...prev]);
            };

            return (
                <div className="flex h-screen w-full font-mono">
                    <Sidebar />
                    <main className="flex-1 flex min-w-0">
                        <KanbanBoard
                            tasks={tasks}
                            onTaskClick={setSelectedTask}
                            onCommand={handleCommand}
                            filterText={filterText}
                            onFilterChange={setFilterText}
                        />
                        {selectedTask ? (
                            <TaskDetail
                                task={selectedTask}
                                onClose={() => setSelectedTask(null)}
                                onUpdate={handleTaskUpdate}
                            />
                        ) : (
                            <InfoPanel logs={logs} />
                        )}
                    </main>
                </div>
            );
        };

        // --- APP ---
        const App = () => {
            return (
                <MemoryRouter>
                    <Routes>
                        <Route path="/" element={<DashboardPage />} />
                    </Routes>
                </MemoryRouter>
            );
        };

        // --- RENDER ---
        const container = document.getElementById('root');
        const root = createRoot(container);
        root.render(<App />);

    </script>
</body>
</html>